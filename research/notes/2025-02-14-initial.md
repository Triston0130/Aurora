# Research Log — 2025-02-14

## Agenda
- Map Aurora’s feature commitments against peer languages.
- Identify open research questions for effect inference and region-based memory.
- Collect canonical references for bibliography seeding.

## Comparative Matrix (Initial Draft)

| Capability                | Aurora (target)                                   | Rust                                        | Koka                                   | Pony                                  | Cyclone                               |
|---------------------------|---------------------------------------------------|---------------------------------------------|----------------------------------------|---------------------------------------|---------------------------------------|
| Ownership & Borrowing     | Compile-time ownership + region polymorphism      | Ownership/borrowing via lifetimes           | Reference counting + uniqueness types  | Actor-isolated heaps                  | Region-based + pointer safety         |
| Effect System             | Algebraic effect rows w/ inference & polymorphism | Result/`?` (no general effect system)       | Algebraic effects w/ handlers          | Capability-based (no static effects)  | Exceptions w/ annotations (limited)   |
| Concurrency Model         | Actors + structured concurrency + async/await     | async/await + Send/Sync traits              | Effect handlers for concurrency        | Actor-only (no shared state)          | Threads + safety annotations          |
| Zones / Heterogeneity     | Compiler-managed GPU/RT zones                     | External crates (CUDA, embedded)            | Research prototypes                    | N/A                                   | Limited (focus on safe C alternative) |
| Compile-Time Meta         | Hygienic macros + CTFE + reflection               | Declarative/procedural macros + const eval  | Modest macro support                   | Macros experimental                   | Limited macros                        |
| Optional GC               | Cycle collector optional per region/type          | Reference-counted libs (`Rc`, `Arc`)        | RC + cycle collector                   | Per-actor GC (ORCA)                   | Optional region GC                    |

## Open Questions
1. **Effect Inference**: How to integrate row-polymorphic effects with trait resolution without exponential blow-up? Investigate Hindley–Milner with rows (Jones & Wadler 1993) and recent work from Koka 2.0.
2. **Region Borrow Checking**: Determine whether to encode region constraints as part of the type system (via kinding) or as a separate dataflow analysis; evaluate alias types approach from Cyclone.
3. **Zone Semantics**: Formalise guarantees for real-time zones—should they be treated as effect capabilities or via a separate type qualifier?
4. **Actor Failure Handling**: Explore effect-based modelling of actor failure to integrate with language-level error propagation.

## Next Actions
- Draft RFC for effect row representation choices (Week 2).
- Prototype constraint solver with effect rows in Rust (Phase 3 prep).
- Reach out to Koka maintainers regarding performance characteristics of their inference engine (for citations/interviews).

## Runtime Scheduler Benchmark (2025-02-14)
- Prototype: `aurora-runtime-scheduler-spike` example `load_test` (8 actors, 10k messages each).
- Environment: macOS (local dev machine), Tokio multi-thread runtime (8 worker threads).
- Result: 80,000 messages dispatched and drained in 0.060 s → ~1.34M msg/s throughput.
- Notes: Structured join semantics ensure completion detection without artificial sleeps. Actor loop now yields instead of sleeping to emulate lightweight work.

## Effect Solver Prototype Progress
- Crate: `aurora-effect-solver` now models effect row unification with substitution maps.
- Supports row variable substitutions: e.g. `[IOError | ε]` unified with `[Timeout]` yields substitution `ε ↦ [Timeout]` and canonical row union.
- Tail aliasing handled by orienting substitutions toward left-hand row variables, preventing cyclic dependency.
- Future work: integrate solver with parser/type inference pipeline; expand occurs-check diagnostics and effect capability constraints.

---
